<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="It extends the functionality of logger package. Additional
    logging metadata can be configured to be collected. Logging messages are
    displayed on console and optionally they are sent to Azure Log Analytics
    workspace in real-time.">
<title>Logging in R and Post to Azure Log Analytics Workspace • azlogr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Logging in R and Post to Azure Log Analytics Workspace">
<meta property="og:description" content="It extends the functionality of logger package. Additional
    logging metadata can be configured to be collected. Logging messages are
    displayed on console and optionally they are sent to Azure Log Analytics
    workspace in real-time.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">azlogr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/how-to-use-azlogr.html">How to use azlogr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atalv/azlogr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="azlogr">azlogr<a class="anchor" aria-label="anchor" href="#azlogr"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>azlogr</code> is to enable logging in ‘R’ and easily send the logging messages to ‘Azure Log Analytics’ workspace in real-time. It also shows the logging message on ‘R’ console, which makes it easier to see the logs in the same pace where R codes are executed. It will be easier for somebody to retrieve the historical logs in ‘Azure Log Analytics’, if needed, and compare.</p>
<p>This is an extension of the <a href="https://daroczig.github.io/logger/" class="external-link"><code>'logger'</code></a> package, see this article: <code><a href="https://daroczig.github.io/logger/articles/Intro.html" class="external-link">vignette("Intro", package = "logger")</a></code> for an introduction about that package. You may set the logging threshold using <code><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">logger::log_threshold()</a></code> function from <code>'logger'</code> package while initiating a session.</p>
<p>Moreover, there is an option provided to add additional custom meta-data while logging, which can be helpful at times.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest version of <code>azlogr</code> as published on <a href="https://cran.r-project.org/" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"azlogr"</span><span class="op">)</span></span></code></pre></div>
<p>Or, install the latest development version of <code>azlogr</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"atalv/azlogr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Below is shown a simple way to use the logging mechanism. Please refer the vignette article of this package, <code><a href="articles/how-to-use-azlogr.html">vignette("how-to-use-azlogr")</a></code>, to know more on how to configure ‘Azure Log Analytics’ workspace credentials and use this package easily.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://atalv.github.io/azlogr/" class="external-link">azlogr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/set_log_config.html">set_log_config</a></span><span class="op">(</span>log_to_azure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/logging.html">logger_info</a></span><span class="op">(</span><span class="st">"logging info"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"level":"INFO","time":"2023-01-11 13:15:03","msg":"logging info"}</span></span></code></pre></div>
<div class="section level3">
<h3 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h3>
<p>And here is an example workflow of configuring the logging mechanism and using <code>logger_*</code> functions to log.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Azure Log Analytics workspace id and shared key are fetched</span></span>
<span><span class="co"># from environment variables.</span></span>
<span><span class="co"># `Sys.setenv` is used only for demonstration purpose!!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>AZ_LOG_ID <span class="op">=</span> <span class="st">"&lt;enter-your-Azure-Log-Analytics-workspace-id&gt;"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>AZ_LOG_KEY <span class="op">=</span> <span class="st">"&lt;enter-your-Azure-Log-Analytics-shared-key&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://atalv.github.io/azlogr/" class="external-link">azlogr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Optionally, add additional meta-data, `country` and `id`, to be collected</span></span>
<span><span class="co"># while logging, on top of the default fields - 'level', 'time', 'msg'.</span></span>
<span><span class="fu"><a href="reference/set_log_config.html">set_log_config</a></span><span class="op">(</span></span>
<span>  log_fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"level"</span>, <span class="st">"time"</span>, <span class="st">"msg"</span><span class="op">)</span>,</span>
<span>  additional_fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"in"</span>, id <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use logger_* functions with appropriate logging level to log.</span></span>
<span><span class="co"># If POST is successful, then it will be available in custom log table on</span></span>
<span><span class="co"># Azure Log Analytics, by default table name will be `log_from_r`_CL (_CL is</span></span>
<span><span class="co"># added by Azure for any custom log table)</span></span>
<span><span class="fu"><a href="reference/logging.html">logger_info</a></span><span class="op">(</span><span class="st">"log info sent to Azure"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"level":"INFO","time":"2023-01-11 13:15:04","msg":"log info sent to Azure","country":"in","id":123}</span></span>
<span></span>
<span><span class="co"># If the POST request is unsuccessful due to Azure credential issue, then log</span></span>
<span><span class="co"># message is displayed on console and a warning is generated with error details.</span></span>
<span><span class="fu"><a href="reference/logging.html">logger_info</a></span><span class="op">(</span><span class="st">"log info sent to Azure"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"level":"INFO","time":"2023-01-11 13:15:04","msg":"log info sent to Azure","country":"in","id":123}</span></span>
<span><span class="co">#&gt; Warning message:</span></span>
<span><span class="co">#&gt; In logger_level(logger::INFO, ...) :</span></span>
<span><span class="co">#&gt;   Some error happened while sending POST request to 'Azure Log Analytics' workspace.</span></span>
<span><span class="co">#&gt; Error message: Error in curl::curl_fetch_memory(url, handle = handle) :</span></span>
<span><span class="co">#&gt;   Could not resolve host: abcd.ods.opinsights.azure.com</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=azlogr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/atalv/azlogr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/atalv/azlogr/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing azlogr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Vivek Atal <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9948-7458" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=azlogr" class="external-link"><img src="https://www.r-pkg.org/badges/version/azlogr" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/atalv/azlogr?branch=main" class="external-link"><img src="https://codecov.io/gh/atalv/azlogr/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/atalv/azlogr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/atalv/azlogr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Vivek Atal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
