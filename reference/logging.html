<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Logger function defined which are created on top of
log_level and layout_json -
these are part of another package 'logger'. Additional
capabilities have been added to those functions which enables this function
to be able to send logs directly to the 'Azure Log Analytics' workspace, and
also have control to post log outputs into the console - as per user input.
Note that, logging threshold can be directly set (if needed) using
log_threshold function from 'logger' package."><title>Logging related functions — logger_level • azlogr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Logging related functions — logger_level"><meta property="og:description" content="Logger function defined which are created on top of
log_level and layout_json -
these are part of another package 'logger'. Additional
capabilities have been added to those functions which enables this function
to be able to send logs directly to the 'Azure Log Analytics' workspace, and
also have control to post log outputs into the console - as per user input.
Note that, logging threshold can be directly set (if needed) using
log_threshold function from 'logger' package."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">azlogr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/how-to-use-azlogr.html">How to use azlogr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/atalv/azlogr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Logging related functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/atalv/azlogr/blob/HEAD/R/logger_level.R" class="external-link"><code>R/logger_level.R</code></a></small>
      <div class="d-none name"><code>logging.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Logger function defined which are created on top of
<code><a href="https://daroczig.github.io/logger/reference/log_level.html" class="external-link">log_level</a></code> and <code><a href="https://daroczig.github.io/logger/reference/layout_json.html" class="external-link">layout_json</a></code> -
these are part of another package <code>'logger'</code>. Additional
capabilities have been added to those functions which enables this function
to be able to send logs directly to the 'Azure Log Analytics' workspace, and
also have control to post log outputs into the console - as per user input.
Note that, logging threshold can be directly set (if needed) using
<code><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">log_threshold</a></code> function from <code>'logger'</code> package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">logger_level</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  log_fields <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"log_fields"</span><span class="op">)</span>,</span>
<span>  additional_fields <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"additional_fields"</span><span class="op">)</span>,</span>
<span>  enforce_ascii_msg <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"enforce_ascii_msg"</span><span class="op">)</span>,</span>
<span>  enforce_tz_utc <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"enforce_tz_utc"</span><span class="op">)</span>,</span>
<span>  log_to_azure <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"log_to_azure"</span><span class="op">)</span>,</span>
<span>  log_type <span class="op">=</span> <span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"log_type"</span><span class="op">)</span>,</span>
<span>  log_customer_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"customer_id_env"</span><span class="op">)</span>, <span class="st">"abcd"</span><span class="op">)</span>,</span>
<span>  log_shared_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="fu"><a href="get_log_config.html">get_log_config</a></span><span class="op">(</span><span class="st">"shared_key_env"</span><span class="op">)</span>, <span class="st">"abcd"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_info</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_error</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_warn</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_debug</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_fatal</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_success</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logger_trace</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>Content(s) of this argument is directly passed on to
<code><a href="https://daroczig.github.io/logger/reference/log_level.html" class="external-link">log_level</a></code> function of the <code>'logger'</code>
package.</p></dd>


<dt>log_fields</dt>
<dd><p>Character vector of field names to be included in the JSON.
These field names are automatically collected by
<code><a href="https://daroczig.github.io/logger/reference/get_logger_meta_variables.html" class="external-link">get_logger_meta_variables</a></code> function, please refer
to that function's documentation to see which fields are collected.</p></dd>


<dt>additional_fields</dt>
<dd><p>A named vector of type list with key-value pairs of
additional meta data which needs to be added in logging context on top of
<code>log_fields</code>. The respective value of each key is expected to be of
length 1. It is <code>NULL</code> by default.</p></dd>


<dt>enforce_ascii_msg</dt>
<dd><p>If <code>TRUE</code> (default), the logging message is
guaranteed to have all non-ASCII characters escaped. If <code>FALSE</code>, the
characters will be logged as-is. Please note, it is better to ensure
ASCII, otherwise there might be error while sending the HTTP POST request
to 'Azure Log Analytics' workspace.</p></dd>


<dt>enforce_tz_utc</dt>
<dd><p>If <code>TRUE</code> (default), the logging time field is
converted to UTC timezone while sending the logging dump to 'Azure Log
Analytics' workspace. If <code>FALSE</code>, then the local time captured by
<code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></code> is recorded in the time field.</p></dd>


<dt>log_to_azure</dt>
<dd><p>If <code>TRUE</code> (default), then logs will be sent to
'Azure Log Analytics' workspace and console. Else if <code>FALSE</code> then
logs will not be sent to 'Azure Log Analytics' workspace, it will only be
displayed on console, which is the default layout of <code>'logger'</code>
package.</p></dd>


<dt>log_type</dt>
<dd><p>Single element character vector is expected. Logs will be
posted to this event on 'Azure Log Analytics'. For details, check this:
<a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=python/" class="external-link">https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=python/</a>
. Default value is <code>"log_from_r"</code>.</p></dd>


<dt>log_customer_id</dt>
<dd><p>Workspace ID of 'Azure Log Analytics' workspace. By
default it fetches from the environment variable named <code>AZ_LOG_ID</code>.
If the environment variable is not set, then a dummy value <code>"abcd"</code>
is used. The environment variable's name can be modified by
<code><a href="set_log_config.html">set_log_config</a></code></p></dd>


<dt>log_shared_key</dt>
<dd><p>Shared key of 'Azure Log Analytics' workspace. By
default it fetches from the environment variable named <code>AZ_LOG_KEY</code>.
If the environment variable is not set, then a dummy value <code>"abcd"</code>
is used. The environment variable's name can be modified by
<code><a href="set_log_config.html">set_log_config</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>log_to_azure</code> is <code>FALSE</code> then log output is shown on
console. Else, if <code>TRUE</code>, then log output is shown on console, as
well as posted to 'Azure Log Analytics' workspace under the custom table
name as specified by <code>log_type</code> argument. If POST request is
unsuccessful, then additional warning message is thrown with POST request
response. If POST request is successful, then it invisibly returns the
<code><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">POST</a></code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<ul><li><p>Most of the arguments of this function have a default value which
is read from the output of <code><a href="get_log_config.html">get_log_config</a></code>. The idea is
to run the <code><a href="set_log_config.html">set_log_config</a></code> function once to define the
default arguments; and use them automatically while logging anything
without the need of specifying them every time it is triggered.</p></li>
<li><p>'Azure Log Analytics' workspace id and shared key are intentionally
fetched from environment variables for security purpose. It is not
a good practice to specify them explicitly. Using environment variable
is one easy approach to potentially hide it from unintentional user.</p></li>
<li><p>It may take ~5–10 minutes to see the logging messages on the 'Azure
Log Analytics' portal after the first time a message is posted to a new
custom log table.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Logging layout is set in JSON format, required to send to 'Azure Log
Analytics'. Note that this layout modifies the global <code>namespace</code> of
<code>'logger'</code> package by default - that is not important for this use
case.</p>
<p><code>logger_info</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">INFO</a></code> by default.</p>
<p><code>logger_error</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">ERROR</a></code> by default.</p>
<p><code>logger_warn</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">WARN</a></code> by default.</p>
<p><code>logger_debug</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">DEBUG</a></code> by default.</p>
<p><code>logger_fatal</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">FATAL</a></code> by default.</p>
<p><code>logger_success</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">SUCCESS</a></code> by default.</p>
<p><code>logger_trace</code> is a wrapper function around
<code>logger_level</code> - logging level is set as
<code><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">TRACE</a></code> by default.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Define logging config and then use logger_* functions to log</span></span></span>
<span class="r-in"><span><span class="fu"><a href="set_log_config.html">set_log_config</a></span><span class="op">(</span>log_to_azure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">logger_level</span><span class="op">(</span><span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">INFO</a></span>, <span class="st">"logging message"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Specify other arguments explicitly inside the logger_level function</span></span></span>
<span class="r-in"><span><span class="fu">logger_level</span><span class="op">(</span><span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">INFO</a></span>, <span class="st">"logging message"</span>, log_to_azure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For ease, use wrapper functions instead of using `logger_level` function as</span></span></span>
<span class="r-in"><span><span class="co"># below</span></span></span>
<span class="r-in"><span><span class="fu">logger_info</span><span class="op">(</span><span class="st">"logging message info"</span>, log_to_azure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Also, instead of writing `log_to_azure = FALSE` every time, set the</span></span></span>
<span class="r-in"><span><span class="co"># configuration in one step using `set_log_config`, and continue to use</span></span></span>
<span class="r-in"><span><span class="co"># wrapper functions as usual.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="set_log_config.html">set_log_config</a></span><span class="op">(</span>log_to_azure <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">logger_info</span><span class="op">(</span><span class="st">"logging message info"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'error'</span></span></span>
<span class="r-in"><span><span class="fu">logger_error</span><span class="op">(</span><span class="st">"logging message error"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'warn'</span></span></span>
<span class="r-in"><span><span class="fu">logger_warn</span><span class="op">(</span><span class="st">"logging message warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change log threshold to debug</span></span></span>
<span class="r-in"><span><span class="fu">logger</span><span class="fu">::</span><span class="fu"><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">log_threshold</a></span><span class="op">(</span><span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">DEBUG</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'debug'</span></span></span>
<span class="r-in"><span><span class="fu">logger_debug</span><span class="op">(</span><span class="st">"logging message debug"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'fatal'</span></span></span>
<span class="r-in"><span><span class="fu">logger_fatal</span><span class="op">(</span><span class="st">"logging message fatal"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'success'</span></span></span>
<span class="r-in"><span><span class="fu">logger_success</span><span class="op">(</span><span class="st">"logging message success"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change logging threshold</span></span></span>
<span class="r-in"><span><span class="fu">logger</span><span class="fu">::</span><span class="fu"><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">log_threshold</a></span><span class="op">(</span><span class="fu">logger</span><span class="fu">::</span><span class="va"><a href="https://daroczig.github.io/logger/reference/log_levels.html" class="external-link">TRACE</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Wrapper function for log level 'trace'</span></span></span>
<span class="r-in"><span><span class="fu">logger_trace</span><span class="op">(</span><span class="st">"logging message trace"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Vivek Atal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

